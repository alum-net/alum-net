{
	"info": {
		"_postman_id": "d7f5b855-8cc2-40f7-981b-f9ba17623a82",
		"name": "Test",
		"description": "### Welcome to Postman! This is your first collection. \n\nCollections are your starting point for building and testing APIs. You can use this one to:\n\n• Group related requests\n• Test your API in real-world scenarios\n• Document and share your requests\n\nUpdate the name and overview whenever you’re ready to make it yours.\n\n[Learn more about Postman Collections.](https://learning.postman.com/docs/collections/collections-overview/)",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "39146326"
	},
	"item": [
		{
			"name": "Course",
			"item": [
				{
					"name": "Course creation",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"EL status code es el esperado\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"const jsonData = pm.response.json();",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () {",
									"    pm.expect(jsonData).to.have.all.keys('message');",
									"});",
									"",
									"pm.test(\"El mensaje de respuesta es el esperado\", function (){",
									"    pm.expect(jsonData.message).to.eql('Curso creado correctamente');",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-Course\"));",
									"",
									"function runInitProcess() {",
									"  getAccessToken(function() {",
									"    initTestUsers(function() {",
									"    });",
									"  });",
									"}",
									"",
									"runInitProcess();"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"Test-curso\",\r\n  \"description\": \"tupla creada para test\",\r\n  \"shift\": \"EVENING\",\r\n  \"approvalGrade\": 0.7,\r\n  \"startDate\": \"2025-09-01\",\r\n  \"endDate\": \"2025-12-15\",\r\n  \"teachersEmails\": [\"profesor1@alumnet.com\"]\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{alumnetUrl}}/api/courses",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"courses"
							]
						}
					},
					"response": []
				},
				{
					"name": "Course delete",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"El status code es el esperado\", function () {",
									"    pm.response.to.have.status(204);",
									"});",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-Course\"));",
									"",
									"function runInitProcess() {",
									"  getAccessToken(function() {",
									"    initTestUsers(function() {",
									"      initTestCourses(function() {",
									"        getCursoId(\"Test-curso-delete\", \"curso2-test-eliminar\", function(){})",
									"      });",
									"    });",
									"  });",
									"}",
									"",
									"runInitProcess();",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{alumnetUrl}}/api/courses/{{id_curso}}",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"courses",
								"{{id_curso}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Unenrollment student",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-Course\"));",
									"",
									"function runInitProcess() {",
									"  getAccessToken(function() {",
									"    initTestUsers(function() {",
									"      initTestCourses(function() {",
									"        getCursoId(\"Test-curso-unroll-student\", \"curso3-verificar-unroll-student\", function(){",
									"            enrollStudent(\"estudiante1@alumnet.com\", function (){})",
									"        })",
									"      });",
									"    });",
									"  });",
									"}",
									"",
									"runInitProcess();",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"El status code es el esperado\", function () {",
									"    pm.response.to.have.status(204);",
									"});",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{alumnetUrl}}/api/courses/{{id_curso}}/participations/estudiante1@alumnet.com",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"courses",
								"{{id_curso}}",
								"participations",
								"estudiante1@alumnet.com"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get members",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-Course\"));",
									"",
									"function runInitProcess() {",
									"  getAccessToken(function() {",
									"    initTestUsers(function() {",
									"      initTestCourses(function() {",
									"        getCursoId(\"Test-curso-get-members\", \"curso5-verificar-get-members\", function(){",
									"            enrollStudent(\"estudiante3@alumnet.com\", function () { })",
									"        })",
									"      });",
									"    });",
									"  });",
									"}",
									"",
									"runInitProcess();"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"El status code es el esperado\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"const json = pm.response.json();",
									"",
									"pm.test(\"La respuesta contiene los miembros esperados\", function () {",
									"    pm.expect(json).to.have.property('data').that.is.an('array').with.lengthOf(2);",
									"    const emails = json.data.map(item => item.email);",
									"    pm.expect(emails).to.include.members([",
									"        \"estudiante3@alumnet.com\",",
									"        \"profesor6@alumnet.com\"",
									"    ]);",
									"});",
									"",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () {",
									"    const requiredKeys = [\"avatarUrl\", \"email\", \"enabled\", \"lastname\", \"name\", \"role\"];",
									"    pm.expect(json).to.have.property('data').that.is.an('array');",
									"    json.data.forEach(item => {",
									"        requiredKeys.forEach(key => {",
									"            pm.expect(item).to.have.property(key);",
									"        });",
									"    });",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{alumnetUrl}}/api/courses/{{id_curso}}/members",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"courses",
								"{{id_curso}}",
								"members"
							]
						}
					},
					"response": []
				},
				{
					"name": "Enrollment student",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-Course\"));",
									"",
									"function runInitProcess() {",
									"  getAccessToken(function() {",
									"    initTestUsers(function() {",
									"      initTestCourses(function() {",
									"        getCursoId(\"Test-curso-enroll-student\", \"curso4-verificar-enroll-student\", function(){})",
									"      });",
									"    });",
									"  });",
									"}",
									"",
									"runInitProcess();"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"El status code es el esperado\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"const jsonData = pm.response.json();",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () {",
									"    pm.expect(jsonData).to.have.all.keys('message');",
									"});",
									"",
									"pm.test(\"El mensaje de la respuesta es el esperado\", function () {",
									"    pm.expect(jsonData.message).to.eql('Estudiante matriculado correctamente');",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"studentEmail\": \"estudiante2@alumnet.com\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{alumnetUrl}}/api/courses/{{id_curso}}/participations",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"courses",
								"{{id_curso}}",
								"participations"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get courses",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-Course\"));",
									"",
									"function runInitProcess() {",
									"  getAccessToken(function() {",
									"    initTestUsers(function() {",
									"      initTestCourses(function() {",
									"      });",
									"    });",
									"  });",
									"}",
									"",
									"runInitProcess();"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"El status code es el esperado\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"pm.test(\"La respuesta contiene los cursos esperados\", function () {",
									"    var requiredNames = [",
									"        'curso1-verificar-curso',",
									"        'curso2-test-eliminar',",
									"        'curso3-verificar-unroll-student',",
									"        'curso4-verificar-enroll-student'",
									"    ];",
									"    var foundNames = (jsonData.data || []).map(function(course) { return course.name; });",
									"    var missing = requiredNames.filter(function(name) { return !foundNames.includes(name); });",
									"    pm.expect(missing, 'Missing course names: ' + missing.join(', ')).to.be.empty;",
									"});",
									"",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () {",
									"    const requiredKeys = [",
									"        \"approvalGrade\",",
									"        \"description\",",
									"        \"endDate\",",
									"        \"id\",",
									"        \"name\",",
									"        \"shift\",",
									"        \"startDate\",",
									"        \"teachers\",",
									"        \"year\"",
									"    ];",
									"    pm.expect(jsonData).to.have.property('data').that.is.an('array');",
									"    jsonData.data.forEach(item => {",
									"        requiredKeys.forEach(key => {",
									"            pm.expect(item).to.have.property(key);",
									"        });",
									"    });",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{alumnetUrl}}/api/courses/",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"courses",
								""
							],
							"query": [
								{
									"key": "name",
									"value": "2",
									"disabled": true
								},
								{
									"key": "teacherEmail",
									"value": "803h38i@alumnet.com",
									"disabled": true
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "CoursesBulkCreation",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"pm.test(\"El status code es el esperado\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () {",
									"    // Validar claves principales",
									"    pm.expect(jsonData).to.have.property('data');",
									"    pm.expect(jsonData).to.have.property('message');",
									"    // Validar claves dentro de 'data'",
									"    pm.expect(jsonData.data).to.have.property('errors');",
									"    pm.expect(jsonData.data).to.have.property('failedCreations');",
									"    pm.expect(jsonData.data).to.have.property('successfulCreations');",
									"    pm.expect(jsonData.data).to.have.property('totalRecords');",
									"});",
									"",
									"pm.test(\"El número de errores coincide con el esperado\", function () {",
									"    pm.expect(jsonData.data[\"failedCreations\"]).to.equal(2);",
									"    pm.expect(jsonData.data[\"successfulCreations\"]).to.equal(6);",
									"    pm.expect(jsonData.data[\"totalRecords\"]).to.equal(8);",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-Course\"));",
									"",
									"function runInitProcess() {",
									"  getAccessToken(function() {",
									"  });",
									"}",
									"",
									"runInitProcess();",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "postman-cloud:///1f0b6ced-bbb0-4370-9541-2e260d870e59"
								},
								{
									"key": "hasHeaders",
									"value": "true",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{alumnetUrl}}/api/courses/bulk-creation",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"courses",
								"bulk-creation"
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "User",
			"item": [
				{
					"name": "User Creation",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"El status code es el esperado\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"const jsonData = pm.response.json();",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () {",
									"    pm.expect(jsonData).to.have.all.keys('message');",
									"});",
									"",
									"pm.test(\"El mensaje de la respuesta es el esperado\", function () {",
									"    pm.expect(jsonData.message).to.eql('Usuario creado exitosamente');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-User\"));",
									"",
									"function runInitProcess() {",
									"  getAccessToken(function() {",
									"  });",
									"}",
									"",
									"runInitProcess();"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"El loco\",\n    \"lastname\": \"profesor\",\n    \"group\": \"teachers\",\n    \"email\": \"profesor422@alumnet.com\",\n    \"password\": \"test1234\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{alumnetUrl}}/api/users/create-user",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"users",
								"create-user"
							]
						}
					},
					"response": []
				},
				{
					"name": "UserSearch by email",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-User\"));",
									"",
									"function runInitProcess() {",
									"  getAccessToken(function() {",
									"    initTestUsers(function() {",
									"    });",
									"  });",
									"}",
									"",
									"runInitProcess();"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"EL status code es el esperado\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"La respuesta contiene los usuarios esperados\", function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json).to.have.property('data').that.is.an('array').with.length.greaterThan(0);",
									"    const emails = json.data.map(item => item.email);",
									"    pm.expect(emails).to.include(\"estudiante-test-usuario1@alumnet.com\");",
									"});",
									"",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () {",
									"    const json = pm.response.json();",
									"    const requiredKeys = [\"avatarUrl\", \"email\", \"enabled\", \"lastname\", \"name\", \"role\"];",
									"    json.data.forEach(item => {",
									"        requiredKeys.forEach(key => {",
									"            pm.expect(item).to.have.property(key);",
									"        });",
									"    });",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{alumnetUrl}}/api/users/?name=estudiante-test-usuario1",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"users",
								""
							],
							"query": [
								{
									"key": "page",
									"value": "0",
									"disabled": true
								},
								{
									"key": "size",
									"value": "2",
									"disabled": true
								},
								{
									"key": "name",
									"value": "estudiante-test-usuario1"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "UserSearch by role",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-User\"));",
									"",
									"function runInitProcess() {",
									"  getAccessToken(function() {",
									"    initTestUsers(function() {",
									"    });",
									"  });",
									"}",
									"",
									"runInitProcess();"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"EL status code es el esperado\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"La respuesta contiene los usuarios esperados\", function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json).to.have.property('data').that.is.an('array').with.length.greaterThan(0);",
									"    const emails = json.data.map(item => item.email);",
									"    pm.expect(emails).to.include(\"profesor7@alumnet.com\", \"profesor8@alumnet.com\");",
									"});",
									"",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () {",
									"    const json = pm.response.json();",
									"    const requiredKeys = [\"avatarUrl\", \"email\", \"enabled\", \"lastname\", \"name\", \"role\"];",
									"    json.data.forEach(item => {",
									"        requiredKeys.forEach(key => {",
									"            pm.expect(item).to.have.property(key);",
									"        });",
									"    });",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{alumnetUrl}}/api/users/?role=TEACHER",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"users",
								""
							],
							"query": [
								{
									"key": "role",
									"value": "TEACHER"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "UserModify",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-User\"));",
									"",
									"function runInitProcess() {",
									"  getAccessToken(function() {",
									"    initTestUsers(function() {",
									"    });",
									"  });",
									"}",
									"",
									"runInitProcess();"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"El status code es el esperado\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"const jsonData = pm.response.json();",
									"",
									"pm.test(\"El mensaje de la respuesta es el esperado\", function () {",
									"    pm.expect(jsonData.message).to.eql('Usuario modificado correctamente.');",
									"})",
									"",
									"// Helper para verificar presencia de claves",
									"function hasAllKeys(obj, keys) {",
									"    return keys.every(k => Object.prototype.hasOwnProperty.call(obj, k));",
									"}",
									"",
									"const json = pm.response.json();",
									"",
									"",
									"// Validar claves dentro de data",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () {",
									"    const expectedDataKeys = [",
									"        \"avatarUrl\",",
									"        \"email\",",
									"        \"enabled\",",
									"        \"lastname\",",
									"        \"name\",",
									"        \"role\"",
									"    ];",
									"    pm.expect(hasAllKeys(json.data, expectedDataKeys)).to.be.true;",
									"",
									"    // Validaciones de tipo básicas",
									"    pm.expect(json.data.avatarUrl).to.be.a(\"string\");",
									"    pm.expect(json.data.email).to.be.a(\"string\");",
									"    pm.expect(json.data.enabled).to.be.a(\"boolean\");",
									"    pm.expect(json.data.lastname).to.be.a(\"string\");",
									"    pm.expect(json.data.name).to.be.a(\"string\");",
									"    pm.expect(json.data.role).to.be.a(\"string\");",
									"});",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "modifyRequest",
									"type": "file",
									"src": "postman-cloud:///1f0b53de-f25c-4db0-b853-6f6164df9451"
								},
								{
									"key": "userAvatar",
									"type": "file",
									"src": "postman-cloud:///1f0b53e0-fc20-4a20-bc8e-0f55bba8df89"
								}
							]
						},
						"url": {
							"raw": "{{alumnetUrl}}/api/users/estudiante3@alumnet.com",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"users",
								"estudiante3@alumnet.com"
							]
						}
					},
					"response": []
				},
				{
					"name": "UserBulkCreation",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"El status code es el esperado\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () {",
									"    pm.expect(jsonData).to.have.all.keys('data', 'message');",
									"    pm.expect(jsonData.data).to.have.all.keys('errors', 'failedCreations', 'successfulCreations', 'totalRecords');",
									"});",
									"",
									"pm.test(\"El mensaje de respuesta es el esperado\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.message).to.eql('Solicitud de creación masiva de usuarios procesada exitosamente.');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-User\"));",
									"",
									"function runInitProcess() {",
									"  getAccessToken(function() {",
									"  });",
									"}",
									"",
									"runInitProcess();"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "postman-cloud:///1f0b6c1f-ce82-4120-982e-794ce5a45929"
								},
								{
									"key": "hasHeaders",
									"value": "true",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{alumnetUrl}}/api/users/bulk-creation",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"users",
								"bulk-creation"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Section",
			"item": [
				{
					"name": "CreateSection",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-Course\"));",
									"",
									"function runInitProcess() {",
									"  getAccessToken(function() {",
									"    initTestUsers(function() {",
									"      initTestCourses(function() {",
									"        getCursoId(\"Test-curso-create-section\", \"curso6-verificar-create-section\", function(){})",
									"      });",
									"    });",
									"  });",
									"}",
									"",
									"runInitProcess();",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"EL status code es el esperado\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"const jsonData = pm.response.json();",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () { ",
									"    pm.expect(jsonData).to.have.all.keys('message');",
									"});",
									"",
									"pm.test(\"El mensaje de la respuesta es el esperado\", function () { ",
									"    pm.expect(jsonData.message).to.eql('Sección creada exitosamente');",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "section",
									"type": "file",
									"src": "postman-cloud:///1f0b45b8-d825-4d40-96da-b08516f6c2a3"
								},
								{
									"key": "resources",
									"type": "file",
									"src": "postman-cloud:///1f0b3a0a-e2a1-4c60-ad28-a06ba754ebd2"
								}
							]
						},
						"url": {
							"raw": "{{alumnetUrl}}/api/sections/{{id_curso}}",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"sections",
								"{{id_curso}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Course Content Access",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-Course\"));",
									"",
									"function runInitProcess() {",
									"  getAccessToken(function() {",
									"    initTestUsers(function() {",
									"      initTestCourses(function() {",
									"        getCursoId(\"Test-curso-create-section\", \"curso6-verificar-create-section\", function(){",
									"            enrollStudent(\"estudiante4@alumnet.com\", function (){})",
									"        })",
									"      });",
									"    });",
									"  });",
									"}",
									"",
									"runInitProcess();",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"El status code es el esperado\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () {",
									"    let jsonData;",
									"    try {",
									"        jsonData = pm.response.json();",
									"    } catch (e) {",
									"        pm.expect.fail(\"La respuesta no es un JSON válido\");",
									"        return;",
									"    }",
									"",
									"    // data",
									"    pm.expect(jsonData).to.have.property(\"data\");",
									"    pm.expect(jsonData.data).to.have.property(\"description\");",
									"    pm.expect(jsonData.data).to.have.property(\"sections\");",
									"    pm.expect(jsonData.data.sections).to.have.property(\"data\");",
									"    pm.expect(jsonData.data.sections).to.have.property(\"errors\");",
									"    pm.expect(jsonData.data.sections).to.have.property(\"message\");",
									"    pm.expect(jsonData.data.sections).to.have.property(\"pageNumber\");",
									"    pm.expect(jsonData.data.sections).to.have.property(\"pageSize\");",
									"    pm.expect(jsonData.data.sections).to.have.property(\"totalElements\");",
									"    pm.expect(jsonData.data.sections).to.have.property(\"totalPages\");",
									"    pm.expect(jsonData).to.have.property(\"message\");",
									"",
									"    // data.sections.data (array)",
									"    pm.expect(jsonData.data.sections.data).to.be.an(\"array\");",
									"    // data.sections.errors (array)",
									"    pm.expect(jsonData.data.sections.errors).to.be.an(\"array\");",
									"",
									"    // Si hay al menos una sección, validar claves del primer elemento",
									"    if (jsonData.data.sections.data.length > 0) {",
									"        const section0 = jsonData.data.sections.data[0];",
									"        pm.expect(section0).to.have.property(\"description\");",
									"        pm.expect(section0).to.have.property(\"id\");",
									"        pm.expect(section0).to.have.property(\"sectionResources\");",
									"        pm.expect(section0).to.have.property(\"title\");",
									"        pm.expect(section0.sectionResources).to.be.an(\"array\");",
									"",
									"        // Si hay al menos un recurso, validar claves del primer recurso",
									"        if (section0.sectionResources.length > 0) {",
									"            const resource0 = section0.sectionResources[0];",
									"            pm.expect(resource0).to.have.property(\"extension\");",
									"            pm.expect(resource0).to.have.property(\"id\");",
									"            pm.expect(resource0).to.have.property(\"name\");",
									"            pm.expect(resource0).to.have.property(\"order\");",
									"            pm.expect(resource0).to.have.property(\"url\");",
									"        }",
									"    }",
									"});",
									"",
									"",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{alumnetUrl}}/api/courses/{{id_curso}}/content/?userId=estudiante4@alumnet.com",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"courses",
								"{{id_curso}}",
								"content",
								""
							],
							"query": [
								{
									"key": "userId",
									"value": "estudiante4@alumnet.com"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Modify Section",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-User\"));",
									"",
									"function runInitProcess() {",
									"  getAccessToken(function() {",
									"        getSectionId(function(){})",
									"  });",
									"}",
									"",
									"runInitProcess();",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"El status code es el esperado\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"const jsonData = pm.response.json();",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () { ",
									"    pm.expect(jsonData).to.have.all.keys('message');",
									"});",
									"",
									"pm.test(\"El mensaje de la respuesta es correcto\", function () { ",
									"    pm.expect(jsonData.message).to.eql('Sección actualizada exitosamente');",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "resources",
									"type": "file",
									"src": "postman-cloud:///1f0b3a0a-e2a1-4c60-ad28-a06ba754ebd2"
								},
								{
									"key": "section",
									"type": "file",
									"src": "postman-cloud:///1f0b45f7-74a5-4ba0-9dd9-ffef0ca25c4b"
								}
							]
						},
						"url": {
							"raw": "{{alumnetUrl}}/api/sections/{{id_curso}}/{{id_section}}",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"sections",
								"{{id_curso}}",
								"{{id_section}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete section",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"El status code es el esperado\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"const jsonData = pm.response.json();",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () { ",
									"    pm.expect(jsonData).to.have.all.keys('message');",
									"});",
									"",
									"pm.test(\"El mensaje de la respuesta es correcto\", function () { ",
									"    pm.expect(jsonData.message).to.eql('Sección eliminada exitosamente');",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-User\"));",
									"",
									"function runInitProcess() {",
									"  getAccessToken(function() {",
									"        getSectionId(function(){})",
									"  });",
									"}",
									"",
									"runInitProcess();",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{alumnetUrl}}/api/sections/{{id_curso}}/{{id_section}}",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"sections",
								"{{id_curso}}",
								"{{id_section}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Forum",
			"item": [
				{
					"name": "GetPosts",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-Course\"));",
									"",
									"function runInitProcess() {",
									"  getAccessToken(function() {",
									"    initTestUsers(function() {",
									"      initTestCourses(function() {",
									"        getCursoId(\"post-get-post\", \"Curso9-verificar-get-post\", function(){",
									"            enrollStudent(\"estudiante6@alumnet.com\", function(){",
									"                createPost(\"Obtener un post\", \"estudiante6@alumnet.com\", function (){});",
									"            });",
									"        });",
									"      });",
									"    });",
									"  });",
									"}",
									"",
									"runInitProcess();",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Helpers",
									"function hasAllKeys(obj, keys) {",
									"    return keys.every(k => Object.prototype.hasOwnProperty.call(obj, k));",
									"}",
									"",
									"pm.test(\"EL status code es el esperado\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"const json = pm.response.json();",
									"",
									"// Validar claves top-level",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () {",
									"    const topLevelKeys = [",
									"        \"data\",",
									"        \"errors\",",
									"        \"message\",",
									"        \"pageNumber\",",
									"        \"pageSize\",",
									"        \"totalElements\",",
									"        \"totalPages\"",
									"    ];",
									"    const itemKeys = [",
									"        \"author\",",
									"        \"content\",",
									"        \"courseId\",",
									"        \"createdAt\",",
									"        \"id\",",
									"        \"parentPost\",",
									"        \"responses\",",
									"        \"rootPost\",",
									"        \"title\",",
									"        \"totalResponses\",",
									"        \"updatedAt\"",
									"    ];",
									"",
									"    pm.expect(hasAllKeys(json, topLevelKeys)).to.be.true;",
									"    json.data.forEach((item, idx) => {",
									"        pm.expect(hasAllKeys(item, itemKeys), `Faltan claves en data[${idx}]`).to.be.true;",
									"    });",
									"",
									"});",
									"",
									"",
									"// Validación opcional de valores específicos del ejemplo (si quieres forzar exactitud)",
									"pm.test(\"El mensaje de respuesta es el esperado\", function () {",
									"    pm.expect(json.message).to.eql(\"Posts obtenidos exitosamente\");",
									"    if (json.totalElements > 0) {",
									"        pm.expect(json.data.length).to.be.at.least(1);",
									"    }",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{alumnetUrl}}/api/forums/posts?forumType=GENERAL&courseId={{id_curso}}",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"forums",
								"posts"
							],
							"query": [
								{
									"key": "forumType",
									"value": "GENERAL"
								},
								{
									"key": "page",
									"value": "0",
									"disabled": true
								},
								{
									"key": "size",
									"value": "1",
									"disabled": true
								},
								{
									"key": "courseId",
									"value": "{{id_curso}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get parent post",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-Course\"));",
									"",
									"function runInitProcess() {",
									"  getAccessToken(function() {",
									"    initTestUsers(function() {",
									"      initTestCourses(function() {",
									"        getCursoId(\"post-get-post\", \"Curso9-verificar-get-post\", function(){",
									"            enrollStudent(\"estudiante6@alumnet.com\", function(){",
									"                createPost(\"Obtener un post\", \"estudiante6@alumnet.com\", function (){});",
									"            });",
									"        });",
									"      });",
									"    });",
									"  });",
									"}",
									"",
									"runInitProcess();",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Helpers",
									"function hasAllKeys(obj, keys) {",
									"    return keys.every(k => Object.prototype.hasOwnProperty.call(obj, k));",
									"}",
									"",
									"pm.test(\"EL status code es el esperado\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"const json = pm.response.json();",
									"",
									"// Validar claves top-level",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () {",
									"    const topLevelKeys = [",
									"        \"data\",",
									"        \"errors\",",
									"        \"message\",",
									"        \"pageNumber\",",
									"        \"pageSize\",",
									"        \"totalElements\",",
									"        \"totalPages\"",
									"    ];",
									"    const itemKeys = [",
									"        \"author\",",
									"        \"content\",",
									"        \"courseId\",",
									"        \"createdAt\",",
									"        \"id\",",
									"        \"parentPost\",",
									"        \"responses\",",
									"        \"rootPost\",",
									"        \"title\",",
									"        \"totalResponses\",",
									"        \"updatedAt\"",
									"    ];",
									"",
									"    pm.expect(hasAllKeys(json, topLevelKeys)).to.be.true;",
									"    json.data.forEach((item, idx) => {",
									"        pm.expect(hasAllKeys(item, itemKeys), `Faltan claves en data[${idx}]`).to.be.true;",
									"    });",
									"",
									"});",
									"",
									"",
									"// Validación opcional de valores específicos del ejemplo (si quieres forzar exactitud)",
									"pm.test(\"El mensaje de respuesta es el esperado\", function () {",
									"    pm.expect(json.message).to.eql(\"Posts obtenidos exitosamente\");",
									"    if (json.totalElements > 0) {",
									"        pm.expect(json.data.length).to.be.at.least(1);",
									"    }",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{alumnetUrl}}/api/forums/posts?forumType=GENERAL&courseId={{id_curso}}&parentPost={{id_post}}",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"forums",
								"posts"
							],
							"query": [
								{
									"key": "forumType",
									"value": "GENERAL"
								},
								{
									"key": "page",
									"value": "0",
									"disabled": true
								},
								{
									"key": "size",
									"value": "1",
									"disabled": true
								},
								{
									"key": "courseId",
									"value": "{{id_curso}}"
								},
								{
									"key": "parentPost",
									"value": "{{id_post}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "CreatePost",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-Course\"));",
									"",
									"function runInitProcess() {",
									"  getAccessToken(function() {",
									"    initTestUsers(function() {",
									"      initTestCourses(function() {",
									"        getCursoId(\"post-create-post\", \"Curso8-verificar-create-post\", function(){",
									"            enrollStudent(\"estudiante5@alumnet.com\", function (){})",
									"        })",
									"      });",
									"    });",
									"  });",
									"}",
									"",
									"runInitProcess();",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"EL status code es el esperado\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"const jsonData = pm.response.json();",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () { ",
									"    pm.expect(jsonData).to.have.all.keys('message');",
									"});",
									"",
									"pm.test(\"El mensaje de la respuesta es el esperado\", function () { ",
									"    pm.expect(jsonData.message).to.eql('Se creó el post correctamente');",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"forumType\": \"GENERAL\",\r\n    \"courseId\": {{id_curso}},\r\n    \"content\": \"Creacion de post de prueba\",\r\n    \"author\":{\r\n        \"name\": \"Estudiante 5\",\r\n        \"email\": \"estudiante5@alumnet.com\"\r\n    }\r\n        // \"rootPost\": \"6907b4ff791b2759c2c8d13d\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{alumnetUrl}}/api/forums/posts",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"forums",
								"posts"
							]
						}
					},
					"response": []
				},
				{
					"name": "DeletePost",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-Course\"));",
									"",
									"function runInitProcess() {",
									"  getAccessToken(function() {",
									"    initTestUsers(function() {",
									"      initTestCourses(function() {",
									"        getCursoId(\"post-delete-post\", \"Curso10-delete-post\", function(){",
									"            enrollStudent(\"estudiante7@alumnet.com\", function(){",
									"                createPost(\"Eliminar este post\", \"estudiante7@alumnet.com\", function (){",
									"                    getPostId(function(){});",
									"                });",
									"",
									"            });",
									"        });",
									"      });",
									"    });",
									"  });",
									"}",
									"",
									"runInitProcess();",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"EL status code es el esperado\", function () {",
									"    pm.response.to.have.status(204);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"forumType\": \"GENERAL\",\r\n    \"courseId\": 1,\r\n    \"content\": \"Esta es una respuesta al post\",\r\n    \"author\":{\r\n        \"name\": \"Gaston\",\r\n        \"email\": \"prueba@gc\"\r\n    }\r\n}"
						},
						"url": {
							"raw": "{{alumnetUrl}}/api/forums/posts/{{id_post}}",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"forums",
								"posts",
								"{{id_post}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "UpdatePost",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-Course\"));",
									"",
									"function runInitProcess() {",
									"  getAccessToken(function() {",
									"    initTestUsers(function() {",
									"      initTestCourses(function() {",
									"        getCursoId(\"post-modify-post\", \"Curso11-modify-post\", function(){",
									"            enrollStudent(\"estudiante8@alumnet.com\", function(){",
									"                createPost(\"Eliminar este post\", \"estudiante8@alumnet.com\", function (){",
									"                    getPostId(function(){});",
									"                });",
									"",
									"            });",
									"        });",
									"      });",
									"    });",
									"  });",
									"}",
									"",
									"runInitProcess();",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"El status code es el esperado\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"const jsonData = pm.response.json();",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () { ",
									"    pm.expect(jsonData).to.have.all.keys('message');",
									"});",
									"",
									"pm.test(\"El mensaje de la respuesta es correcto\", function () { ",
									"    pm.expect(jsonData.message).to.eql('Se modificó el post correctamente');",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"message\": \"Mensaje de post modificado\",\r\n    \"title\": \"Title modificado\",\r\n    \"content\": \"Modificando el post de prueba\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{alumnetUrl}}/api/forums/posts/{{id_post}}",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"forums",
								"posts",
								"{{id_post}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Event",
			"item": [
				{
					"name": "Create Task",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"type\": \"QUESTIONNAIRE\",\n    \"sectionId\": 1,\n    \"title\": \"Cuestionario\",\n    \"description\": \"Cuestionario de Java\",\n    \"startDate\": \"2025-11-28 17:00\",\n    \"endDate\": \"2025-12-28 19:00\",\n    \"maxGrade\": \"30\",\n    \"questions\": [\n        {\n            \"text\": \"¿Qué es JPA?\",\n            \"answers\": [\n                {\n                    \"text\": \"Java Persistence API\",\n                    \"correct\": true\n                },\n                {\n                    \"text\": \"Java Programming Application\",\n                    \"correct\": false\n                },\n                {\n                    \"text\": \"Java Platform Architecture\",\n                    \"correct\": false\n                },\n                {\n                    \"text\": \"Java Protocol Access\",\n                    \"correct\": false\n                }\n            ]\n        }\n    ],\n    \"durationInMinutes\": 120\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{alumnetUrl}}/api/events/create",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"events",
								"create"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Task By Id",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": ""
						}
					},
					"response": []
				},
				{
					"name": "DeleteEvent",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{alumnetUrl}}/api/events/1",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"events",
								"1"
							]
						}
					},
					"response": []
				},
				{
					"name": "Submit Task",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "homeworkFile",
									"type": "file",
									"src": "/home/gburgos/Videos/PROPUESTA DE PROYECTO 2025.pdf"
								}
							]
						},
						"url": {
							"raw": "{{alumnetUrl}}/api/events/1/submit-homework?studentEmail=students@alumnet.com",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"events",
								"1",
								"submit-homework"
							],
							"query": [
								{
									"key": "studentEmail",
									"value": "students@alumnet.com"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Library",
			"item": [
				{
					"name": "GetLabels",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-Course\"));",
									"",
									"function runInitProcess() {",
									"      getAccessToken(function() {",
									"        createLable(\"EtiquetaTestGet\", function(){})",
									"      })",
									"};",
									"",
									"runInitProcess();",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Mantener test de status code",
									"pm.test(\"El status code es el esperado\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"let jsonData;",
									"try {",
									"    jsonData = pm.response.json();",
									"} catch (e) {",
									"    pm.test(\"Response is valid JSON\", function () {",
									"        throw new Error(\"Expected JSON response but failed to parse\");",
									"    });",
									"}",
									"",
									"// Mantener test del mensaje específico",
									"pm.test(\"El mensaje de la respuesta es el esperado\", function () {",
									"    pm.expect(jsonData).to.have.property(\"message\");",
									"    pm.expect(jsonData.message).to.eql(\"Etiquetas obtenidos exitosamente\");",
									"});",
									"",
									"// Test único para validar todas las claves esperadas y sus tipos",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () {",
									"    pm.expect(jsonData).to.be.an(\"object\");",
									"",
									"    const expectedKeys = [",
									"        \"data\",",
									"        \"errors\",",
									"        \"message\",",
									"        \"pageNumber\",",
									"        \"pageSize\",",
									"        \"totalElements\",",
									"        \"totalPages\"",
									"    ];",
									"",
									"    expectedKeys.forEach(k => pm.expect(jsonData).to.have.property(k));",
									"",
									"    // Validaciones de tipo por clave",
									"    pm.expect(jsonData.data).to.be.an(\"array\");",
									"    pm.expect(jsonData.errors).to.be.an(\"array\");",
									"    pm.expect(jsonData.message).to.be.a(\"string\");",
									"    pm.expect(jsonData.pageNumber).to.be.a(\"number\");",
									"    pm.expect(jsonData.pageSize).to.be.a(\"number\");",
									"    pm.expect(jsonData.totalElements).to.be.a(\"number\");",
									"    pm.expect(jsonData.totalPages).to.be.a(\"number\");",
									"",
									"    // Validar forma de los elementos de data (id: number, name: string)",
									"    jsonData.data.forEach(item => {",
									"        pm.expect(item).to.be.an(\"object\");",
									"        pm.expect(item).to.have.property(\"id\");",
									"        pm.expect(item).to.have.property(\"name\");",
									"        pm.expect(item.id).to.be.a(\"number\");",
									"        pm.expect(item.name).to.be.a(\"string\");",
									"    });",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{alumnetUrl}}/api/library/labels?textToSearch=etiquetaCreadaTest",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"library",
								"labels"
							],
							"query": [
								{
									"key": "textToSearch",
									"value": "etiquetaCreadaTest"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "CreateLabel",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-User\"));",
									"",
									"function runInitProcess() {",
									"  getAccessToken(function() {",
									"  });",
									"}",
									"",
									"runInitProcess();"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Tests for CreateLabel response shape",
									"pm.test(\"El status code es el esperado\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"let jsonData;",
									"try {",
									"    jsonData = pm.response.json();",
									"} catch (e) {",
									"    pm.test(\"Response is valid JSON\", function () {",
									"        throw new Error(\"Expected JSON response but failed to parse\");",
									"    });",
									"}",
									"",
									"pm.test(\"El mensaje de la respuesta es el esperado'\", function () {",
									"    pm.expect(jsonData).to.have.property(\"message\");",
									"    pm.expect(jsonData.message).to.eql(\"Etiqueta creada exitosamente\");",
									"});",
									"",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () {",
									"    pm.expect(jsonData).to.have.property(\"data\");",
									"    pm.expect(jsonData.data).to.be.an(\"object\");",
									"    pm.expect(jsonData.data).to.have.property(\"id\");",
									"    pm.expect(jsonData.data).to.have.property(\"name\");",
									"    pm.expect(jsonData.data.id).to.be.a(\"number\");",
									"    pm.expect(jsonData.data.name).to.be.a(\"string\");",
									"});",
									"",
									"// Optionally store the created label id and name for later use",
									"if (jsonData && jsonData.data) {",
									"    const { id, name } = jsonData.data;",
									"    if (typeof id === 'number') {",
									"        pm.collectionVariables.set(\"label_id\", String(id));",
									"    }",
									"    if (typeof name === 'string') {",
									"        pm.collectionVariables.set(\"label_name\", name);",
									"    }",
									"}"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Etiqueta de ejemplo 3\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{alumnetUrl}}/api/library/labels",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"library",
								"labels"
							]
						}
					},
					"response": []
				},
				{
					"name": "DeleteLabel",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-Course\"));",
									"",
									"function runInitProcess() {",
									"      getAccessToken(function() {",
									"        createLable(\"EtiquetaTestBorrar\", function(){",
									"            getLabelId(\"EtiquetaTestBorrar\", function(){})",
									"        })",
									"      })",
									"};",
									"",
									"runInitProcess();",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Mantener test de status code",
									"pm.test(\"El status code es el esperado\", function () {",
									"    pm.response.to.have.status(204);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{alumnetUrl}}/api/library/labels/{{id_label}}",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"library",
								"labels",
								"{{id_label}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "UpdateLabel",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-Course\"));",
									"",
									"function runInitProcess() {",
									"      getAccessToken(function() {",
									"        createLable(\"EtiquetaTestModificar\", function(){",
									"            getLabelId(\"EtiquetaTestModificar\", function(){})",
									"        })",
									"      })",
									"};",
									"",
									"runInitProcess();",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"El status code es el esperado\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"const jsonData = pm.response.json();",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () { ",
									"    pm.expect(jsonData).to.have.all.keys('message');",
									"});",
									"",
									"pm.test(\"El mensaje de la respuesta es correcto\", function () { ",
									"    pm.expect(jsonData.message).to.eql('Etiqueta modificada exitosamente');",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"name\": \"NombreActualizado\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{alumnetUrl}}/api/library/labels/{{id_label}}",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"library",
								"labels",
								"{{id_label}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "CreateResource",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"El status code es el esperado\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"const jsonData = pm.response.json();",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () { ",
									"    pm.expect(jsonData).to.have.all.keys('message');",
									"});",
									"",
									"pm.test(\"El mensaje de la respuesta es correcto\", function () { ",
									"    pm.expect(jsonData.message).to.eql('Se creó el recurso correctamente');",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-Course\"));",
									"",
									"function runInitProcess() {",
									"      getAccessToken(function() {",
									"        createLable(\"Etiqueta de ejemplo 1\", function(){",
									"            createLable(\"Etiqueta de ejemplo 2\", function(){",
									"                createLable(\"Etiqueta de ejemplo 3\", function(){})",
									"            })",
									"        })",
									"      })",
									"};",
									"",
									"runInitProcess();",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "/Users/fede/Downloads/Pantalla Verde.pdf"
								},
								{
									"key": "metadata",
									"type": "file",
									"src": "/Users/fede/Documents/proyectos/tests/proyecto tecnoinf/alum-net/test/createResources.json"
								}
							]
						},
						"url": {
							"raw": "{{alumnetUrl}}/api/library/resources",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"library",
								"resources"
							]
						}
					},
					"response": []
				},
				{
					"name": "GetResources",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// 1. Validar status code",
									"pm.test('El status code es el esperado', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"// 2. Validar mensaje de respuesta",
									"pm.test('El mensaje de la respuesta es el esperado', function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.message).to.eql('Recursos obtenidos exitosamente');",
									"});",
									"",
									"// 3. Validar estructura de claves principales y anidadas",
									"pm.test('La respuesta contiene todas las clave/valor esperadas', function () {",
									"    var jsonData = pm.response.json();",
									"    // Claves principales",
									"    var mainKeys = ['data', 'errors', 'message', 'pageNumber', 'pageSize', 'totalElements', 'totalPages'];",
									"    mainKeys.forEach(function(key) {",
									"        pm.expect(jsonData).to.have.property(key);",
									"    });",
									"    // data debe ser un array",
									"    pm.expect(jsonData.data).to.be.an('array');",
									"    if (jsonData.data.length > 0) {",
									"        var resource = jsonData.data[0];",
									"        var resourceKeys = ['creator', 'extension', 'id', 'labels', 'name', 'sizeInBytes', 'title', 'url'];",
									"        resourceKeys.forEach(function(key) {",
									"            pm.expect(resource).to.have.property(key);",
									"        });",
									"        // creator debe ser un objeto con claves específicas",
									"        var creatorKeys = ['avatarUrl', 'email', 'enabled', 'lastname', 'name', 'role'];",
									"        creatorKeys.forEach(function(key) {",
									"            pm.expect(resource.creator).to.have.property(key);",
									"        });",
									"        // labels debe ser un array de objetos con claves específicas",
									"        pm.expect(resource.labels).to.be.an('array');",
									"        if (resource.labels.length > 0) {",
									"            var labelKeys = ['id', 'name'];",
									"            resource.labels.forEach(function(label) {",
									"                labelKeys.forEach(function(key) {",
									"                    pm.expect(label).to.have.property(key);",
									"                });",
									"            });",
									"        }",
									"    }",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-Course\"));",
									"",
									"function runInitProcess() {",
									"      getAccessToken(function() {})",
									"};",
									"",
									"runInitProcess();",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{alumnetUrl}}/api/library/resources",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"library",
								"resources"
							]
						}
					},
					"response": []
				},
				{
					"name": "ModifyResource",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-Course\"));",
									"",
									"function runInitProcess() {",
									"    getAccessToken(function () {",
									"        initTestUsers(function () {",
									"            createLable(\"Etiqueta para modificar\", function () {",
									"                createLable(\"Etiqueta para modificar\", function () {",
									"                    createLable(\"Etiqueta para modificar\", function () { ",
									"                        getResourceId(function(){})",
									"                    })",
									"                })",
									"            })",
									"        })",
									"    });",
									"};",
									"",
									"runInitProcess();",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"El status code es el esperado\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"const jsonData = pm.response.json();",
									"pm.test(\"La respuesta contiene todas las clave/valor esperadas\", function () { ",
									"    pm.expect(jsonData).to.have.all.keys('message');",
									"});",
									"",
									"pm.test(\"El mensaje de la respuesta es correcto\", function () { ",
									"    pm.expect(jsonData.message).to.eql('Recurso modificado exitosamente');",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"currentUserEmail\": \"profesor3@alumnet.com\",\r\n    \"labelIds\": [ 1, 2 ]\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{alumnetUrl}}/api/library/resources/{{id_recurso}}",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"library",
								"resources",
								"{{id_recurso}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "DeleteResource",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"eval(pm.collectionVariables.get(\"utils-Course\"));",
									"",
									"function runInitProcess() {",
									"      getAccessToken(function() {",
									"        getResourceId(function(){})",
									"      })",
									"};",
									"",
									"runInitProcess();",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Mantener test de status code",
									"pm.test(\"El status code es el esperado\", function () {",
									"    pm.response.to.have.status(204);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{alumnetUrl}}/api/library/resources/{{id_recurso}}",
							"host": [
								"{{alumnetUrl}}"
							],
							"path": [
								"api",
								"library",
								"resources",
								"{{id_recurso}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "LOGIN",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const jsonData = pm.response.json();",
							"pm.collectionVariables.set(\"access_token\", jsonData.access_token);"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "grant_type",
							"value": "password",
							"type": "text"
						},
						{
							"key": "client_id",
							"value": "alumnet",
							"type": "text"
						},
						{
							"key": "username",
							"value": "develop@alumnet.com",
							"type": "text"
						},
						{
							"key": "password",
							"value": "develop",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "{{keycloak}}/realms/alumnet-realm/protocol/openid-connect/token",
					"host": [
						"{{keycloak}}"
					],
					"path": [
						"realms",
						"alumnet-realm",
						"protocol",
						"openid-connect",
						"token"
					]
				}
			},
			"response": []
		},
		{
			"name": "dummy",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"function getResourceId(next){",
							"    pm.sendRequest({",
							"    url: pm.collectionVariables.get(\"alumnetUrl\") + '/api/library/resources',",
							"    method: 'GET',",
							"    header: {",
							"        'Authorization': 'Bearer ' + pm.variables.get('access_token')",
							"    }",
							"}, function (err, res) {",
							"    if (err) {",
							"        console.error('Error en la petición GET:', err);",
							"        return;",
							"    }",
							"var json = res.json();",
							"",
							"if (json.data && json.data.length > 0) {",
							"    var idRecurso = json.data[0].id;",
							"    pm.collectionVariables.set('id_recurso', parseInt(idRecurso));",
							"    console.log(\"✅ Se ha guardado id_recurso con el valor:\", pm.collectionVariables.get(\"id_recurso\"));",
							"} else {",
							"    console.warn('⚠️ No se encontró ningún recurso en la respuesta');",
							"    pm.collectionVariables.unset('id_recurso');",
							"}",
							"    next();",
							"});",
							"}",
							"getResourceId(function () {})"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "www.google.com",
					"host": [
						"www",
						"google",
						"com"
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					"pm.collectionVariables.set(\"utils-Course\", `",
					"const arr_users_test = [",
					"  {",
					"    \"name\": \"Profesor\",",
					"    \"lastname\": \"1\",",
					"    \"group\": \"teachers\",",
					"    \"email\": \"profesor1@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"  {",
					"    \"name\": \"Profesor\",",
					"    \"lastname\": \"2\",",
					"    \"group\": \"teachers\",",
					"    \"email\": \"profesor2@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"  {",
					"    \"name\": \"Profesor\",",
					"    \"lastname\": \"3\",",
					"    \"group\": \"teachers\",",
					"    \"email\": \"profesor3@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"  {",
					"    \"name\": \"Profesor\",",
					"    \"lastname\": \"4\",",
					"    \"group\": \"teachers\",",
					"    \"email\": \"profesor4@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"  {",
					"    \"name\": \"Profesor\",",
					"    \"lastname\": \"5\",",
					"    \"group\": \"teachers\",",
					"    \"email\": \"profesor5@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"  {",
					"    \"name\": \"Profesor\",",
					"    \"lastname\": \"6\",",
					"    \"group\": \"teachers\",",
					"    \"email\": \"profesor6@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"  {",
					"    \"name\": \"Estudiante\",",
					"    \"lastname\": \"1\",",
					"    \"group\": \"students\",",
					"    \"email\": \"estudiante1@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"  {",
					"    \"name\": \"Estudiante\",",
					"    \"lastname\": \"2\",",
					"    \"group\": \"students\",",
					"    \"email\": \"estudiante2@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"  {",
					"    \"name\": \"Estudiante\",",
					"    \"lastname\": \"3\",",
					"    \"group\": \"students\",",
					"    \"email\": \"estudiante3@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"  {",
					"    \"name\": \"Profesor\",",
					"    \"lastname\": \"7\",",
					"    \"group\": \"teachers\",",
					"    \"email\": \"profesor7@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"  {",
					"    \"name\": \"Profesor\",",
					"    \"lastname\": \"8\",",
					"    \"group\": \"teachers\",",
					"    \"email\": \"profesor8@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"  {",
					"    \"name\": \"Estudiante\",",
					"    \"lastname\": \"4\",",
					"    \"group\": \"students\",",
					"    \"email\": \"estudiante4@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"  {",
					"    \"name\": \"Profesor\",",
					"    \"lastname\": \"9\",",
					"    \"group\": \"teachers\",",
					"    \"email\": \"profesor9@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"  {",
					"    \"name\": \"Estudiante\",",
					"    \"lastname\": \"5\",",
					"    \"group\": \"students\",",
					"    \"email\": \"estudiante5@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"    {",
					"    \"name\": \"Estudiante\",",
					"    \"lastname\": \"6\",",
					"    \"group\": \"students\",",
					"    \"email\": \"estudiante6@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"    {",
					"    \"name\": \"Profesor\",",
					"    \"lastname\": \"10\",",
					"    \"group\": \"teachers\",",
					"    \"email\": \"profesor10@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"    {",
					"    \"name\": \"Estudiante\",",
					"    \"lastname\": \"7\",",
					"    \"group\": \"students\",",
					"    \"email\": \"estudiante7@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"    {",
					"    \"name\": \"Profesor\",",
					"    \"lastname\": \"11\",",
					"    \"group\": \"teachers\",",
					"    \"email\": \"profesor11@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"      {",
					"    \"name\": \"Estudiante\",",
					"    \"lastname\": \"8\",",
					"    \"group\": \"students\",",
					"    \"email\": \"estudiante7@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"    {",
					"    \"name\": \"Profesor\",",
					"    \"lastname\": \"12\",",
					"    \"group\": \"teachers\",",
					"    \"email\": \"profesor12@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"      {",
					"    \"name\": \"Profesor\",",
					"    \"lastname\": \"13\",",
					"    \"group\": \"teachers\",",
					"    \"email\": \"profesor13@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  }",
					"];",
					"",
					"",
					"const arr_course_test = [",
					"  {",
					"    \"name\": \"curso1-verificar-curso\",",
					"    \"description\": \"Test-curso-get\",",
					"    \"shift\": \"MORNING\",",
					"    \"approvalGrade\": 0.7,",
					"    \"startDate\": \"2025-09-01\",",
					"    \"endDate\": \"2025-12-15\",",
					"    \"teachersEmails\": [",
					"      \"profesor2@alumnet.com\"",
					"    ]",
					"  },",
					"  {",
					"    \"name\": \"curso2-test-eliminar\",",
					"    \"description\": \"Test-curso-delete\",",
					"    \"shift\": \"MORNING\",",
					"    \"approvalGrade\": 0.7,",
					"    \"startDate\": \"2025-09-01\",",
					"    \"endDate\": \"2025-12-15\",",
					"    \"teachersEmails\": [",
					"      \"profesor3@alumnet.com\"",
					"    ]",
					"  },",
					"  {",
					"    \"name\": \"curso3-verificar-unroll-student\",",
					"    \"description\": \"Test-curso-unroll-student\",",
					"    \"shift\": \"MORNING\",",
					"    \"approvalGrade\": 0.7,",
					"    \"startDate\": \"2025-09-01\",",
					"    \"endDate\": \"2025-12-15\",",
					"    \"teachersEmails\": [",
					"      \"profesor4@alumnet.com\"",
					"    ]",
					"  },",
					"  {",
					"    \"name\": \"curso4-verificar-enroll-student\",",
					"    \"description\": \"Test-curso-enroll-student\",",
					"    \"shift\": \"MORNING\",",
					"    \"approvalGrade\": 0.7,",
					"    \"startDate\": \"2025-09-01\",",
					"    \"endDate\": \"2025-12-15\",",
					"    \"teachersEmails\": [",
					"      \"profesor5@alumnet.com\"",
					"    ]",
					"  },",
					"    {",
					"    \"name\": \"curso5-verificar-get-members\",",
					"    \"description\": \"Test-curso-get-members\",",
					"    \"shift\": \"MORNING\",",
					"    \"approvalGrade\": 0.7,",
					"    \"startDate\": \"2025-09-01\",",
					"    \"endDate\": \"2025-12-15\",",
					"    \"teachersEmails\": [",
					"      \"profesor6@alumnet.com\"",
					"    ]",
					"  },",
					"    {",
					"    \"name\": \"curso6-verificar-create-section\",",
					"    \"description\": \"Test-curso-create-section\",",
					"    \"shift\": \"MORNING\",",
					"    \"approvalGrade\": 0.7,",
					"    \"startDate\": \"2025-09-01\",",
					"    \"endDate\": \"2025-12-15\",",
					"    \"teachersEmails\": [",
					"      \"profesor7@alumnet.com\"",
					"    ]",
					"  },",
					"    {",
					"    \"name\": \"Curso7-verificar-get-section-content\",",
					"    \"description\": \"curso-section-get-content\",",
					"    \"shift\": \"MORNING\",",
					"    \"approvalGrade\": 0.7,",
					"    \"startDate\": \"2025-09-01\",",
					"    \"endDate\": \"2025-12-15\",",
					"    \"teachersEmails\": [",
					"      \"profesor8@alumnet.com\"",
					"    ]",
					"  },",
					"      {",
					"    \"name\": \"Curso8-verificar-create-post\",",
					"    \"description\": \"post-create-post\",",
					"    \"shift\": \"MORNING\",",
					"    \"approvalGrade\": 0.7,",
					"    \"startDate\": \"2025-09-01\",",
					"    \"endDate\": \"2025-12-15\",",
					"    \"teachersEmails\": [",
					"      \"profesor9@alumnet.com\"",
					"    ]",
					"  },",
					"    {",
					"    \"name\": \"Curso9-verificar-get-post\",",
					"    \"description\": \"post-get-post\",",
					"    \"shift\": \"MORNING\",",
					"    \"approvalGrade\": 0.7,",
					"    \"startDate\": \"2025-09-01\",",
					"    \"endDate\": \"2025-12-15\",",
					"    \"teachersEmails\": [",
					"      \"profesor10@alumnet.com\"",
					"    ]",
					"  },",
					"    {",
					"    \"name\": \"Curso10-delete-post\",",
					"    \"description\": \"post-delete-post\",",
					"    \"shift\": \"MORNING\",",
					"    \"approvalGrade\": 0.7,",
					"    \"startDate\": \"2025-09-01\",",
					"    \"endDate\": \"2025-12-15\",",
					"    \"teachersEmails\": [",
					"      \"profesor11@alumnet.com\"",
					"    ]",
					"  },",
					"      {",
					"    \"name\": \"Curso11-modify-post\",",
					"    \"description\": \"post-modify-post\",",
					"    \"shift\": \"MORNING\",",
					"    \"approvalGrade\": 0.7,",
					"    \"startDate\": \"2025-09-01\",",
					"    \"endDate\": \"2025-12-15\",",
					"    \"teachersEmails\": [",
					"      \"profesor12@alumnet.com\"",
					"    ]",
					"  }",
					"]",
					"",
					"function getAccessToken(next) {",
					"  pm.sendRequest({",
					"    url: pm.collectionVariables.get(\"keycloak\") + \"/realms/alumnet-realm/protocol/openid-connect/token\",",
					"    method: 'POST',",
					"    header: { 'Content-Type': 'application/x-www-form-urlencoded' },",
					"    body: {",
					"      mode: 'urlencoded',",
					"      urlencoded: [",
					"        { key: \"grant_type\", value: \"password\" },",
					"        { key: \"client_id\", value: \"alumnet\" },",
					"        { key: \"username\", value: \"develop@alumnet.com\" },",
					"        { key: \"password\", value: \"develop\" }",
					"      ]",
					"    }",
					"  }, function (err, res) {",
					"    if (err) {",
					"      console.error(\"Error al obtener token:\", err);",
					"      return;",
					"    }",
					"    const jsonData = res.json();",
					"    const accessToken = jsonData.access_token;",
					"    pm.collectionVariables.set(\"access_token\", accessToken);",
					"    console.log(\"Nuevo token obtenido y guardado.\");",
					"",
					"    if (next) next();",
					"  });",
					"}",
					"",
					"function initTestUsers(next) {",
					"  const arr = arr_users_test.slice(); // copia simple",
					"  let pending = arr.length;",
					"",
					"  arr.forEach(teacher => {",
					"    pm.sendRequest({",
					"      url: pm.collectionVariables.get(\"alumnetUrl\") + \"/api/users/create-user\",",
					"      method: \"POST\",",
					"      header: { ",
					"        \"Content-Type\": \"application/json\",",
					"        \"Authorization\": \"Bearer \" + pm.collectionVariables.get(\"access_token\")",
					"      },",
					"      body: { mode: \"raw\", raw: JSON.stringify(teacher) }",
					"    }, (err, res) => {",
					"      if (err) {",
					"        console.error(\"❌ Error al crear \" + teacher.email, err);",
					"      } else if (res.code >= 200 && res.code < 300) {",
					"        console.log(\"✅ Usuario creado: \" + teacher.email);",
					"      } else {",
					"        console.error(\"⚠️ Error al crear \" + teacher.email + \": \" + res.code);",
					"      }",
					"",
					"      pending--;",
					"      if (pending === 0 && next) next();",
					"    });",
					"  });",
					"}",
					"",
					"function initTestCourses(next) {",
					"  const arr = arr_course_test.slice();",
					"  let pending = arr.length;",
					"",
					"  arr.forEach(course => {",
					"    pm.sendRequest({",
					"      url: pm.collectionVariables.get(\"alumnetUrl\") + \"/api/courses\",",
					"      method: \"POST\",",
					"      header: { ",
					"        \"Content-Type\": \"application/json\",",
					"        \"Authorization\": \"Bearer \" + pm.collectionVariables.get(\"access_token\")",
					"      },",
					"      body: { mode: \"raw\", raw: JSON.stringify(course) }",
					"    }, (err, res) => {",
					"      if (err) {",
					"        console.error(\"❌ Error al crear \" + course.name, err);",
					"      } else if (res.code >= 200 && res.code < 300) {",
					"        console.log(\"✅ Curso creado: \" + course.name);",
					"      } else {",
					"        console.error(\"⚠️ Error al crear \" + course.name + \": \" + res.code);",
					"      }",
					"",
					"      pending--;",
					"      if (pending === 0 && next) next();",
					"    });",
					"  });",
					"}",
					"function getCursoId(description, name, next){",
					"    pm.sendRequest({",
					"    url: pm.collectionVariables.get(\"alumnetUrl\") + '/api/courses/?description=' + description +'&name=' + name,",
					"    method: 'GET',",
					"    header: {",
					"        'Authorization': 'Bearer ' + pm.variables.get('access_token')",
					"    }",
					"}, function (err, res) {",
					"    if (err) {",
					"        console.error('Error en la petición GET:', err);",
					"        return;",
					"    }",
					"    var json = res.json();",
					"    if (json.data && json.data.length > 0) {",
					"        var id = json.data[0].id;",
					"        pm.collectionVariables.set('id_curso', parseInt(id));",
					"    } else {",
					"        console.warn('No se encontró ningún curso con esa descripción');",
					"        pm.collectionVariables.set('id_curso', parseInt(\"\"));",
					"    }",
					"",
					"    next();",
					"});",
					"}",
					"function enrollStudent(email, next) {",
					"    pm.sendRequest({",
					"        url: pm.collectionVariables.get(\"alumnetUrl\") + \"/api/courses/\" ",
					"             + pm.collectionVariables.get(\"id_curso\") ",
					"             + \"/participations\",",
					"        method: 'POST',",
					"        header: {",
					"            'Content-Type': 'application/json',",
					"            \"Authorization\": \"Bearer \" + pm.collectionVariables.get(\"access_token\")",
					"        },",
					"        body: {",
					"            mode: 'raw',",
					"            raw: JSON.stringify({ studentEmail: email })",
					"        }",
					"    }, function (err, res2) {",
					"        if (err) {",
					"            console.error('❌ Error en la petición de matrícula:', err);",
					"            pm.environment.set('enroll_status', 'error');",
					"            return;",
					"        }",
					"",
					"        const json2 = res2.json();",
					"",
					"        pm.environment.set('enroll_status', json2.success ? 'ok' : 'fail');",
					"        pm.environment.set('enroll_message', json2.message);",
					"",
					"        // ✅ Llamar next() solo cuando terminó correctamente",
					"        if (typeof next === \"function\") next();",
					"    });",
					"}",
					"",
					"",
					"function createPost(contenido, email, next) {",
					"    pm.sendRequest({",
					"        url: pm.collectionVariables.get(\"alumnetUrl\") + \"/api/forums/posts\",",
					"        method: 'POST',",
					"        header: {",
					"            'Content-Type': 'application/json',",
					"            \"Authorization\": \"Bearer \" + pm.collectionVariables.get(\"access_token\")",
					"        },",
					"        body: {",
					"            mode: 'raw',",
					"            raw: JSON.stringify({ ",
					"                forumType: \"GENERAL\",",
					"                courseId: pm.collectionVariables.get(\"id_curso\"),",
					"                content: contenido,",
					"                name: email",
					"            })",
					"        }",
					"    }, function (err, res2) {",
					"        if (err) {",
					"            console.error('Error en creación de post', err);",
					"            return;",
					"        }",
					"",
					"        const json2 = res2.json();",
					"        console.log(\"Post creado correctamente:\", json2);",
					"",
					"        // ✅ Llamar next() cuando la solicitud terminó",
					"    });",
					"        next();",
					"}",
					"",
					"function getPostId(next){",
					"    pm.sendRequest({",
					"    url: pm.collectionVariables.get(\"alumnetUrl\") + \"/api/forums/posts?forumType=GENERAL&courseId=\" + pm.collectionVariables.get(\"id_curso\"),",
					"    method: 'GET',",
					"    header: {",
					"        'Authorization': 'Bearer ' + pm.collectionVariables.get('access_token')",
					"    }",
					"}, function (err, res) {",
					"    if (err) {",
					"        console.error('Error en la petición GET:', err);",
					"        return;",
					"    }",
					"const jsonData = res.json();",
					"",
					"if (jsonData.data && jsonData.data.length > 0) {",
					"    const id = jsonData.data[0].id;",
					"    pm.collectionVariables.set(\"id_post\", id);",
					"    console.log(\"Post ID guardado:\", id);",
					"} else {",
					"    console.warn(\"⚠️ No se encontró ningún elemento en data\");",
					"}",
					"});",
					"next();",
					"}",
					"function createLable(name, next) {",
					"    pm.sendRequest({",
					"        url: pm.collectionVariables.get(\"alumnetUrl\") + \"/api/library/labels\",",
					"        method: 'POST',",
					"        header: {",
					"            'Content-Type': 'application/json',",
					"            \"Authorization\": \"Bearer \" + pm.collectionVariables.get(\"access_token\")",
					"        },",
					"        body: {",
					"            mode: 'raw',",
					"            raw: JSON.stringify({ name })",
					"        }",
					"    }, function (err, res2) {",
					"        if (err) {",
					"            console.error('❌ Error creando etiqueta', err);",
					"            return;",
					"        }",
					"        const json2 = res2.json();",
					"        // ✅ Llamar next() solo cuando terminó correctamente",
					"        if (typeof next === \"function\") next();",
					"    });",
					"}",
					"function getLabelId(name, next){",
					"    pm.sendRequest({",
					"    url: pm.collectionVariables.get(\"alumnetUrl\") + '/api/library/labels?textToSearch=' + name,",
					"    method: 'GET',",
					"    header: {",
					"        'Authorization': 'Bearer ' + pm.variables.get('access_token')",
					"    }",
					"}, function (err, res) {",
					"    if (err) {",
					"        console.error('Error en la petición GET:', err);",
					"        return;",
					"    }",
					"    var json = res.json();",
					"    if (json.data && json.data.length > 0) {",
					"        var id = json.data[0].id;",
					"        pm.collectionVariables.set('id_label', parseInt(id));",
					"        console.log(\"Se ha guradado id_label con el valor: \" + pm.collectionVariables.get(\"id_label\"))",
					"    } else {",
					"        console.warn('No se encontró ningún label con esa descripción');",
					"        pm.collectionVariables.set('id_label', parseInt(\"\"));",
					"    }",
					"    next();",
					"});",
					"}",
					"",
					"",
					"function getResourceId(next){",
					"    pm.sendRequest({",
					"    url: pm.collectionVariables.get(\"alumnetUrl\") + '/api/library/resources',",
					"    method: 'GET',",
					"    header: {",
					"        'Authorization': 'Bearer ' + pm.variables.get('access_token')",
					"    }",
					"}, function (err, res) {",
					"    if (err) {",
					"        console.error('Error en la petición GET:', err);",
					"        return;",
					"    }",
					"var json = res.json();",
					"",
					"if (json.data && json.data.length > 0) {",
					"    var idRecurso = json.data[0].id;",
					"    pm.collectionVariables.set('id_recurso', parseInt(idRecurso));",
					"    console.log(\"✅ Se ha guardado id_recurso con el valor:\", pm.collectionVariables.get(\"id_recurso\"));",
					"} else {",
					"    console.warn('⚠️ No se encontró ningún recurso en la respuesta');",
					"    pm.collectionVariables.unset('id_recurso');",
					"}",
					"    next();",
					"});",
					"}",
					"`",
					");",
					"",
					"pm.collectionVariables.set(\"utils-User\",",
					"`",
					"const arr_users_test = [",
					"    {",
					"    \"name\": \"Estudiante-test-usuario1\",",
					"    \"lastname\": \"1\",",
					"    \"group\": \"students\",",
					"    \"email\": \"estudiante-test-usuario1@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"      {",
					"    \"name\": \"Estudiante-test-usuario2\",",
					"    \"lastname\": \"2\",",
					"    \"group\": \"students\",",
					"    \"email\": \"estudiante-test-usuario2@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"    {",
					"    \"name\": \"Profesor\",",
					"    \"lastname\": \"7\",",
					"    \"group\": \"teachers\",",
					"    \"email\": \"profesor7@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"      {",
					"    \"name\": \"estudiante-test-modify\",",
					"    \"lastname\": \"3\",",
					"    \"group\": \"teachers\",",
					"    \"email\": \"estudiante3@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  },",
					"  {",
					"    \"name\": \"Profesor\",",
					"    \"lastname\": \"8\",",
					"    \"group\": \"teachers\",",
					"    \"email\": \"profesor8@alumnet.com\",",
					"    \"password\": \"test1234\"",
					"  }",
					"",
					"]",
					"function getAccessToken(next) {",
					"  pm.sendRequest({",
					"    url: pm.collectionVariables.get(\"keycloak\") + \"/realms/alumnet-realm/protocol/openid-connect/token\",",
					"    method: 'POST',",
					"    header: { 'Content-Type': 'application/x-www-form-urlencoded' },",
					"    body: {",
					"      mode: 'urlencoded',",
					"      urlencoded: [",
					"        { key: \"grant_type\", value: \"password\" },",
					"        { key: \"client_id\", value: \"alumnet\" },",
					"        { key: \"username\", value: \"develop@alumnet.com\" },",
					"        { key: \"password\", value: \"develop\" }",
					"      ]",
					"    }",
					"  }, function (err, res) {",
					"    if (err) {",
					"      console.error(\"Error al obtener token:\", err);",
					"      return;",
					"    }",
					"    const jsonData = res.json();",
					"    const accessToken = jsonData.access_token;",
					"    pm.collectionVariables.set(\"access_token\", accessToken);",
					"    console.log(\"Nuevo token obtenido y guardado.\");",
					"",
					"    if (next) next();",
					"  });",
					"}",
					"function initTestUsers(next) {",
					"  const arr = arr_users_test.slice(); // copia simple",
					"  let pending = arr.length;",
					"",
					"  arr.forEach(teacher => {",
					"    pm.sendRequest({",
					"      url: pm.collectionVariables.get(\"alumnetUrl\") + \"/api/users/create-user\",",
					"      method: \"POST\",",
					"      header: { ",
					"        \"Content-Type\": \"application/json\",",
					"        \"Authorization\": \"Bearer \" + pm.collectionVariables.get(\"access_token\")",
					"      },",
					"      body: { mode: \"raw\", raw: JSON.stringify(teacher) }",
					"    }, (err, res) => {",
					"      if (err) {",
					"        console.error(\"❌ Error al crear \" + teacher.email, err);",
					"      } else if (res.code >= 200 && res.code < 300) {",
					"        console.log(\"✅ Usuario creado: \" + teacher.email);",
					"      } else {",
					"        console.error(\"⚠️ Error al crear \" + teacher.email + \": \" + res.code);",
					"      }",
					"",
					"      pending--;",
					"      if (pending === 0 && next) next();",
					"    });",
					"  });",
					"}",
					"function getSectionId(next){",
					"    pm.sendRequest({",
					"    url: pm.collectionVariables.get(\"alumnetUrl\") + \"/api/courses/\" + pm.collectionVariables.get(\"id_curso\") + \"/content/?userId=estudiante4@alumnet.com\",",
					"    method: 'GET',",
					"    header: {",
					"        'Authorization': 'Bearer ' + pm.collectionVariables.get('access_token')",
					"    }",
					"}, function (err, res) {",
					"    if (err) {",
					"        console.error('Error en la petición GET:', err);",
					"        return;",
					"    }",
					"",
					"    const json = res.json();",
					"",
					"if (json.data && json.data.sections && json.data.sections.data.length > 0) {",
					"    const sectionResourceId = String(json.data.sections.data[0].id);",
					"    pm.collectionVariables.set('id_section', sectionResourceId);",
					"    console.log('id_section guardado:', sectionResourceId);",
					"} else {",
					"    console.warn('No se encontró ninguna sección o recurso');",
					"    pm.collectionVariables.unset('id_section');",
					"}",
					"    next();",
					"});",
					"}",
					"`);",
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "alumnetUrl",
			"value": "https://localhost:8080"
		},
		{
			"key": "keycloak",
			"value": "https://localhost:8000"
		},
		{
			"key": "access_token",
			"value": ""
		},
		{
			"key": "id_curso",
			"value": ""
		},
		{
			"key": "utils",
			"value": ""
		},
		{
			"key": "utils-Course",
			"value": ""
		},
		{
			"key": "utils-User",
			"value": ""
		},
		{
			"key": "id_section",
			"value": ""
		},
		{
			"key": "id_post",
			"value": ""
		},
		{
			"key": "label_id",
			"value": ""
		},
		{
			"key": "label_name",
			"value": ""
		},
		{
			"key": "id_label",
			"value": ""
		},
		{
			"key": "id_recurso",
			"value": ""
		}
	]
}